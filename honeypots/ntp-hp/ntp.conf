# Allow localhost full access for administration and for ntpd to talk to itself.
restrict 127.0.0.1

# Allow the local clock driver to be used as a time source.
restrict 127.127.1.0

# Allow unrestricted access for honeypot purposes.
# This configuration allows any client to query for time but prevents
# them from querying status, sending traps, or modifying configuration.
# The 'kod' flag sends a "Kiss-o'-Death" packet for violations. Removing 'nopeer' to ensure client logging.
restrict default kod nomodify notrap noquery

# Configure logging to capture peer statistics.
# The log files will be written to /var/log/ntp/, which is a mounted volume.
# The ntp-parser service reads from this volume.
statsdir /var/log/ntp/
filegen peerstats file peerstats type day enable

# Use a pool of public NTP servers. This is more reliable and makes the
# honeypot appear as a standard, well-behaved NTP client/server.
# The 'iburst' option sends a burst of packets on startup for faster sync.
server 0.pool.ntp.org iburst

# Location of the drift file.
driftfile /var/lib/ntp/ntp.drift